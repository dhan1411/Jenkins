pipeline {

       agent {

       label "built-in"
       customWorkspace "/var/lib/jenkins/workpsace/Test1/Jenkins"

       
       }



       environment {

       AWS_CREDENTIALS = credentials("AWS_credentials_id")

       }

       stages{

       stage("Checkout"){

       steps {
             
	     git branch: 'main', url: 'https://github.com/dhan1411/jenkins.git'

       }

       }

       stage("Terraform") {

       steps {

        sh """ terraform init
	       terraform refresh
	       terraform plan
	       terraform apply --auto-approve """

	       }
	       }
	       }
	       }
